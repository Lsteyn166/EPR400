\newpage
\setcounter{subsection}{0}
%Change formatting for tis section

\titleformat{\section}[frame]
{\fontsize{24pt}{28.8pt}\selectfont\bfseries} {} {5pt} {}
\titleformat{\subsection}[display]
{\fontsize{18pt}{21.6pt}\selectfont\bfseries} {} {5pt} {\thesubsection\quad}
\titleformat{\subsubsection}[display]
{\fontsize{14pt}{16.8pt}\selectfont\bfseries} {} {5pt} {\thesubsubsection\quad}
\renewcommand\thesubsection{\arabic{subsection}.}
\renewcommand\thesubsubsection{\arabic{subsection}.\arabic{subsubsection}}
\rhead{\rightmark}
%add paragraph as extra level for experiments
\setcounter{secnumdepth}{5}
\titleformat{\paragraph}[display]
{\fontsize{12pt}{14pt}\selectfont\bfseries}{}{5pt} {\theparagraph\quad}
%add subparagraph
\titleformat{\subparagraph}[display]
{\fontsize{12pt}{14pt}}{}{5pt} {\thesubparagraph\quad}
\renewcommand\thesubparagraph{\arabic{subsection}.\arabic{subsubsection}.\arabic{paragraph}\alph{subparagraph}}


%Start
\section*{Part 4. Main report}
\addcontentsline{toc}{section}{Part 4. Main report}
\markright{Part 4. Main report}
\secun{Literature study}
\pagenumbering{arabic}
\captionsetup[table]{position=bottom}
\input{Lit.tex}

\secun{Approach}
\input{App.tex}

\secun{Design and implementation}
\subsubsection{Background}
\input{Back.tex}

\subsubsection{Theoretical analysis and modelling}
\input{Theory.tex}

\subsubsection{Simulation}
\input{Sim.tex}

\subsubsection{Optimisation}
\input{Opt.tex}

%Electronics
\input{Elec.tex}

\captionsetup[table]{position=bottom}
%Software
\input{Soft.tex}
%Hardware
\input{Hard.tex}

\subsubsection{Design summary}
\begin{table}[H]
\centering

\begin{tabular}{|p{5cm}|p{5cm}|p{5cm}|}
\hline
\textbf{Task} & \textbf{Implementation} & \textbf{Task complete} \\
\hline
 Development of an IK engine in software & The mathematical analysis of the robot was used to create a generic model, which was then first implemented in Python and thereafter in the final robot implementation. & Completed \\\hline
 
Development of a walking algorithm  & A walking algorithm was developed and optimized in Python and then implemented in the final robot.  & Completed\\\hline

Development of a user interface & The user interface was developed for an Android smartphone using Android Studio. & Completed \\\hline

Communication channel between user interface and robot & Bluetooth was used to establish a low bandwidth, low cost communication system between the smartphone and the robot. It communicates commands successfully. & Completed \\\hline

Implementation of electronics on a PCB.& All electronics were implemented on a Veroboard instead of a PCB which is inexpensive and sufficiently robust for the purpose of this project. A PCB would not have made any functional difference to the end result and is not suited for making changes while prototyping. The only difference would have been aesthetically.& Incomplete \\\hline

Implementation of inclinometer sensor & An inclinometer was planned to give the robot the ability to adapt to the exact angle of slanted surfaces but this was not implemented because the robot walks without a problem on the angles of surfaces specified for this project. & Incomplete \\\hline
\end{tabular}
\caption{Design summary}
\label{my-label}
\end{table}


\secun{Results}

\subsubsection{Summary of results achieved}
\begin{table}[H]
\begin{tabular}{|p{5cm}|p{5cm}|p{5cm}|}
\hline
\textbf{Description of requirement or specification
(intended outcome)} & \textbf{Actual outcome}& \textbf{Location in report}\\
\hline
\multicolumn{3}{|l|}{}\\
\multicolumn{3}{|l|}{\textbf{Mission requirements of the product}}\\
\hline

The robot should be able to move in a given direction in 30 degree increments from a stationary position. & The robot is able to move holonomically, therefore able to move in 30 degree increments.&4.2.1\\\hline

The robot should be able to rotate 90 degrees without translating the centre of the body by more than 5\% of the body diameter.&The robot is able to do this.&4.2.2\\\hline

The time it requires to complete a manoeuvre should not vary more than 25\% between smooth and rough surfaces.&The time differs by about 20\%&4.2.3\\\hline

The robot should be able to walk at a speed of at least 100mm/s.&The robot is only capable of 8mm/s&4.2.4\\\hline

The robot should be able to walk on a surface with a 10\% incline without falling over.&The robot can successfully walk on a slanted surface with an incline of up to 10\% &4.2.5\\\hline

\multicolumn{3}{|l|}{}\\
\multicolumn{3}{|l|}{\textbf{Field conditions}}\\
\hline
The robot should be in range of the wireless smartphone controller.&The robot works fine if it is within a range of 10m of the smartphone&\\\hline

To prevent falling over, the robot should walk on surfaces close to horizontal.&The robot is able to work on slanted surfaces with an incline of less than 10\%&\\\hline

The robot should stay dry to protect electronics.&The robot was never tested in wet conditions&\\\hline

The robot should work in normal temperature conditions for South Africa.&The robot never experienced any issues during the testing phase that relates to ambient temperature, relative humidity or any other atmospheric conditions&\\\hline

\end{tabular}
\caption{Summary of results achieved}
\label{tab:sum}
\end{table}

\subsubsection{Summary of results achieved}
\begin{table}[H]
\begin{tabular}{|p{5cm}|p{5cm}|p{5cm}|}
\hline

\multicolumn{3}{|l|}{}\\
\multicolumn{3}{|l|}{\textbf{Specifications}}\\
\hline
The smartphone application should communicate commands from the user interface to the robot at a frequency of at least 10 Hz.&The smartphone application does do this&\\\hline

The inverse kinematics calculator of the robot should be able to calculate the joint positions correctly to move each leg to the desired location.& This works as designed&\\\hline

The servo motor angles should all be within 5 degrees from the calculated values.& The servo motors are all accurate to within 5 degrees&\\\hline

\multicolumn{3}{|l|}{}\\
\multicolumn{3}{|l|}{\textbf{Deliverables}}\\
\hline
Control code for inverse kinematics and servo control.&This was completed and is functional&\\\hline

Android application with a user interface for control of the robot.&This was completed and is functional&\\\hline

Circuits implemented on PCB for interfacing all hardware with the microcontroller.&This was performed on Veroboard instead of PCB&\\\hline

Robot body and legs.& This was all successfully 3D printed&\\\hline

Simulations on all implemented software and analogue design& Tis was completed and is functional&\\\hline

\end{tabular}
\caption{Summary of results achieved (continued)}
\label{tab:sum2}
\end{table}

\subsubsection{Qualification tests}

%Test 1
\paragraph{Qualification test \arabic{paragraph} : Holonomic translation}
\label{par:1}
\subparagraph{Qualification test}
\textit{Objectives of test/experiment}\\
The objective is to prove that the robot is capable of moving in any direction from a standing position without first rotating.
\textit{Equipment used}\\
A canvas with lines in 30 degree increments is used to put the robot on.
\textit{Experimental parameters and setup }\\
The robot is turned on and placed in the centre of the canvas. The test is conducted in the field conditions listed in Table \ref{tab:sum}.
\textit{Experimental protocol}\\
The robot is instructed to move along one of the lines and then return to the centre by using the smartphone as remote control. Once back in the centre, the next line is followed. This process continues until all the lines have been followed.
\subparagraph{Results and observations}
\textit{Measurements}\\
Figure \ref{fig:Res1} shows the robot on the canvas where the qualification test is being performed.
\begin{figure}[H]
\centering
\includegraphics[scale = 1]{pics/Res1.jpg}
\caption{Top view of the robot on the canvas.}
\label{fig:Res1}
\end{figure}
\textit{Description of results}\\
The robot is able to successfully follow the lines on the canvas without ever rotating.

%Test 2
\paragraph{Qualification test \arabic{paragraph} : Rotation without translation}
\subparagraph{Qualification test}
\textit{Objectives of test/experiment}\\
The objective of this test is to confirm that the robot is capable of rotating around its own axis without translating.
\textit{Equipment used}\\
The same canvas used in \ref{par:1} is used for this qualification test. It has two circles, one has the diameter of the robot base, the second is 5\% larger.
\begin{figure}[H]
\centering
\includegraphics[scale = 1]{pics/Res2.jpg}
\caption{Canvas used for this experiment.}
\label{fig:Res2}
\end{figure}
\textit{Experimental parameters and setup }\\
The robot is placed inside the smaller circle and switched on. The test is conducted in the field conditions listed in Table \ref{tab:sum}.
\textit{Experimental protocol}\\
The robot is instructed to rotate from the smartphone application. After 90 degrees of rotation, the robot is instructed to stop and is then turned off. The robot should be within the bigger circle.
\subparagraph{Results and observations}
\textit{Measurements}\\
\begin{figure}[H]
\centering
\includegraphics[scale = 1]{pics/Res3.jpg}
\caption{Robot inside the larger circle}
\label{fig:Res3}
\end{figure}
\textit{Description of results}\\
The robot is still inside the larger circle after rotating 90 degrees.

%Test 3
\paragraph{Qualification test \arabic{paragraph} :Speed on rough terrain}
\subparagraph{Qualification test}

\textit{Objectives of test/experiment}\\The purpose of this test is to show that the robot functions reasonably well on rough terrain when compared to a smooth surface.
\textit{Equipment used}\\
A small test track developed for this purpose is used. In order to compare performance between the smooth and rough terrain, the time to complete the track is recorded with a stopwatch application on a smartphone.
\textit{Experimental parameters and setup }\\
A rough terrain is simulated by scattering small, loose obstacles (foam blocks) over the test track. This is a realistic representation of a wide variety of terrain conditions. For preparation the robot is placed on the start line of the smooth test track and switched on. The test is conducted in the field conditions listed in Table \ref{tab:sum}.
\textit{Experimental protocol}\\
The stopwatch is started and the robot is instructed to follow the line that forms the test track. When the robot reaches the end, the time on the stopwatch is recorded. The test track is scattered with the small obstacles and the procedure is repeated.
\begin{figure}[H]
    \centering
    \begin{subfigure}[t]{0.5\textwidth}
        \centering
        \includegraphics[scale = 1]{pics/Res5.jpg}
        \caption{Test track without obstacles.}
    \end{subfigure}%
    ~ 
    \begin{subfigure}[t]{0.5\textwidth}
        \centering
        \includegraphics[scale = 1]{pics/Res4.jpg}
        \caption{Test track with obstacles.}
    \end{subfigure}
    \caption{Test setup for proving that the robot can easily walk on rough surfaces}
    \label{fig:Res4}
\end{figure}
Figure \ref{fig:Res4} shows the test track for the two different tests.
\subparagraph{Results and observations}
\textit{Measurements}\\
\begin{table}[H]
\centering
\begin{tabular}{|l|l|}
\hline
\textbf{Course condition}&\textbf{Time}\\\hline
Smooth&5:12\\\hline
Rough & 6:20\\
\hline
\end{tabular}
\caption{Results achieved for the test track}
\label{my-label}
\end{table}
\textit{Description of results}\\
The robot moves slower over the obstacles than on the smooth course.

%Test 4
\paragraph{Qualification test \arabic{paragraph} : Speed}
\subparagraph{Qualification test}
\textit{Objectives of test/experiment}\\
The objective of this test is to prove that the robot can reach a speed of 100mm/s
\textit{Equipment used}\\
A linear track designed for this experiment is used to measure the speed. It has markings that is a fixed distance apart that makes it easy to measure the distance travelled. The time will be recorded using a stopwatch application on a smartphone. 
\begin{figure}[H]
\centering
\includegraphics[scale = 1]{pics/Res6.jpg}
\caption{Robot on the track for measuring speed.}
\label{fig:Res6}
\end{figure}
Figure \ref{fig:Res6} shows the robot on the track mentioned above.
\textit{Experimental parameters and setup }\\
The robot is placed at the start of the track and switched on. The test is conducted in the field conditions listed in Table \ref{tab:sum}.
\textit{Experimental protocol}\\
The stopwatch is started and the robot is instructed to move down the track as fast as possible. When the end of the track is reached, the time on the stopwatch is recorded.
\subparagraph{Results and observations}
\textit{Measurements}\\
\begin{table}[H]
\centering
\begin{tabular}{|l|l|l|}
\hline
\textbf{Distance}&\textbf{Time}&\textbf{Speed}\\\hline
1.5m&3:07&8mm/s\\\hline
\end{tabular}
\caption{Results achieved for the speed test track}
\label{my-label}
\end{table}
\textit{Description of results}\\
The robot moves much slower than anticipated.

%Test 5
\paragraph{Qualification test \arabic{paragraph} :Slopes}
\subparagraph{Qualification test}
\textit{Objectives of test/experiment}\\
The objective is to prove that the robot is capable of walking on a slanted surface without falling over.
\textit{Equipment used}\\
A plank is used to create the slanted surface. A long ruler is used to measure the incline of the plank.
\textit{Experimental parameters and setup }\\
The plank is angled at 10\%. This is ensured by making sure that the plank has a height of 10cm at the point that is 1m from the edge of the plank on the ground. The robot is put at the base of the plank. The test is conducted in the field conditions listed in Table \ref{tab:sum}.
\textit{Experimental protocol}\\
The robot is instructed to walk on the plank to see if it struggles or falls over at any stage in the process.
\subparagraph{Results and observations}
\textit{Description of results}\\
The robot walks without any additional difficulty due to the incline. The robot was never close to falling over at any stage in the experiment.

%Test 6
\paragraph{Qualification test \arabic{paragraph} :Slippery surfaces}
\subparagraph{Qualification test}
\textit{Objectives of test/experiment}\\
The objective is investigate the performance of the robot on a slippery surface
\textit{Equipment used}\\
A wooden floor is used as the slippery surface for the robot to walk on.
\textit{Experimental parameters and setup }\\
The robot is put on the wooden floor and turned on. The test is conducted in the field conditions listed in Table \ref{tab:sum}.
\textit{Experimental protocol}\\
The robot is instructed to walk on the wooden floor in both slow and rapid movements to investigate how the legged design functions on low traction environments.
\subparagraph{Results and observations}
\textit{Description of results}\\
The robot with more difficulty on slippery surfaces than on surfaces withh higher traction.

\secun{Discussion}
\input{Disc.tex}

\secun{Conclusion}
\input{Conc.tex}

